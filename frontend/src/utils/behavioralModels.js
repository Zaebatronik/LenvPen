// 10 –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π Block E √ó300

export const BehavioralModels = {
  // –ú–æ–¥–µ–ª—å 1: –ê–∫—É–ª–∞ - —Ö–∏—â–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  shark: {
    name: '–ê–∫—É–ª–∞',
    emoji: 'ü¶à',
    description: '–•–∏—â–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ—Ç–≤–ª–µ—á–µ–Ω–∏—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ñ–æ–∫—É—Å.',
    traits: {
      focus: 95,
      energy: 90,
      discipline: 85,
      chaos: 10
    },
    phrases: [
      "–¢—ã —Å–µ–≥–æ–¥–Ω—è –∞–∫—É–ª–∞. –ñ–µ—Ä—Ç–≤–∞ ‚Äî —Ç–≤–æ–∏ –∑–∞–¥–∞—á–∏.",
      "–§–æ–∫—É—Å –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ. –û—Ç–≤–ª–µ—á–µ–Ω–∏—è? –ù–µ –∑–Ω–∞—é —Ç–∞–∫–∏—Ö.",
      "–¢—ã –¥–≤–∏–∂–µ—à—å—Å—è –∫–∞–∫ —Ö–∏—â–Ω–∏–∫. –†–µ—Å–ø–µ–∫—Ç."
    ],
    detectCriteria: (data) => {
      return data.completion > 85 && data.distractions < 2 && data.taskCompletionSpeed > 80;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 2: –£–ª–∏—Ç–∫–∞ - –º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ —á–µ—Å—Ç–Ω–æ
  snail: {
    name: '–£–ª–∏—Ç–∫–∞',
    emoji: 'üêå',
    description: '–î–≤–∏–∂–µ–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ, –Ω–æ —á–µ—Å—Ç–Ω–æ–µ. –®–∞–≥ –∑–∞ —à–∞–≥–æ–º.',
    traits: {
      focus: 60,
      energy: 40,
      discipline: 70,
      chaos: 20
    },
    phrases: [
      "–¢—ã —É–ª–∏—Ç–∫–∞. –ú–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –≤–µ—Ä–Ω–æ.",
      "–°–∫–æ—Ä–æ—Å—Ç—å ‚Äî –Ω–µ –≥–ª–∞–≤–Ω–æ–µ. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ.",
      "–¢—ã –ø–æ–ª–∑—ë—à—å, –Ω–æ —Ç—ã –ø–æ–ª–∑—ë—à—å –≤–ø–µ—Ä—ë–¥. –ú–æ–ª–æ–¥–µ—Ü."
    ],
    detectCriteria: (data) => {
      return data.completion >= 50 && data.completion < 70 && data.taskCompletionSpeed < 50;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 3: –°–ª–µ–Ω—Ü–µ—Ä - —Å–º–µ—à–µ–Ω–∏–µ –≥–µ—Ä–æ–∏–∑–º–∞ –∏ –ª–µ–Ω–∏
  slencer: {
    name: '–°–ª–µ–Ω—Ü–µ—Ä',
    emoji: 'ü¶•‚ö°',
    description: '–°–º–µ—à–µ–Ω–∏–µ –≥–µ—Ä–æ–∏–∑–º–∞ –∏ –ª–µ–Ω–∏–≤—ã—Ö –ø–æ–ø—ã—Ç–æ–∫. –¢–æ –ª–µ–≤, —Ç–æ –¥–∏–≤–∞–Ω.',
    traits: {
      focus: 55,
      energy: 50,
      discipline: 50,
      chaos: 50
    },
    phrases: [
      "–¢—ã —Å–ª–µ–Ω—Ü–µ—Ä. –ü–æ–ª–æ–≤–∏–Ω–∞ —Ç–µ–±—è —Ö–æ—á–µ—Ç, –ø–æ–ª–æ–≤–∏–Ω–∞ —Å–ø–∏—Ç.",
      "–¢–æ –≥–µ—Ä–æ–π, —Ç–æ –∫–∞—Ä—Ç–æ—à–∫–∞. –ù–æ —Ç—ã —Å—Ç–∞—Ä–∞–µ—à—å—Å—è.",
      "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–ª–µ–Ω—Ü–µ—Ä. –•–∞–æ—Å –∏ –ø–æ—Ä—è–¥–æ–∫ –≤ –æ–¥–Ω–æ–º –ª–∏—Ü–µ."
    ],
    detectCriteria: (data) => {
      return data.completion >= 40 && data.completion < 60 && data.moodSwings > 3;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 4: –§–µ–Ω–∏–∫—Å - –ø–æ—Å–ª–µ –ø—Ä–æ–≤–∞–ª–∞ –º–æ—â–Ω—ã–π —Ä—ã–≤–æ–∫
  phoenix: {
    name: '–§–µ–Ω–∏–∫—Å',
    emoji: 'üî•ü¶Ö',
    description: '–ü–æ—Å–ª–µ –ø—Ä–æ–≤–∞–ª–∞ ‚Äî –º–æ—â–Ω—ã–π —Ä—ã–≤–æ–∫. –í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏–µ –∏–∑ –ø–µ–ø–ª–∞.',
    traits: {
      focus: 80,
      energy: 85,
      discipline: 75,
      chaos: 40
    },
    phrases: [
      "–¢—ã —Ñ–µ–Ω–∏–∫—Å. –ü–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è ‚Äî –≤–∑–ª—ë—Ç!",
      "–ü—Ä–æ–≤–∞–ª? –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ–±–µ–¥–µ.",
      "–¢—ã –≥–æ—Ä–∏—à—å —Å–∏–ª—å–Ω–µ–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å—Ä—ã–≤–∞. –õ–µ–≥–µ–Ω–¥–∞."
    ],
    detectCriteria: (data) => {
      return data.recentFailure && data.currentProgress > data.avgProgress * 1.5;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 5: –ö–∞–ø–∏–±–∞—Ä–∞ - —Å–ø–æ–∫–æ–π–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å
  capybara: {
    name: '–ö–∞–ø–∏–±–∞—Ä–∞',
    emoji: 'ü¶´',
    description: '–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–ø–æ–∫–æ–π–Ω–æ–π –º—É–¥—Ä–æ—Å—Ç–∏. –í—Å—ë –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.',
    traits: {
      focus: 70,
      energy: 60,
      discipline: 80,
      chaos: 15
    },
    phrases: [
      "–¢—ã –∫–∞–ø–∏–±–∞—Ä–∞ –º—É–¥—Ä–æ—Å—Ç–∏. –°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ —Å–∏–ª–∞.",
      "–¢—ã –º—É–¥—Ä. –¢—ã —Å—Ç–∞–±–∏–ª–µ–Ω. –¢—ã ‚Äî –æ–±—Ä–∞–∑–µ—Ü.",
      "–ö–∞–ø–∏–±–∞—Ä–∞ –Ω–µ —Ç–æ—Ä–æ–ø–∏—Ç—Å—è. –ò –Ω–µ –æ—à–∏–±–∞–µ—Ç—Å—è."
    ],
    detectCriteria: (data) => {
      return data.stability > 80 && data.stress < 30 && data.completion > 65;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 6: –¶—ã–ø–ª—ë–Ω–æ–∫-–ø–∞–Ω–∏–∫—ë—Ä - –ø–∞–Ω–∏–∫–∞, –Ω–æ –¥–µ–ª–∞–µ—Ç
  chicken_panicker: {
    name: '–¶—ã–ø–ª—ë–Ω–æ–∫-–ø–∞–Ω–∏–∫—ë—Ä',
    emoji: 'üê£üí®',
    description: '–ü—Ä–∏ –ª—é–±–æ–º –Ω–∞–º—ë–∫–µ –Ω–∞ –∑–∞–¥–∞—á—É: –ø–∞–Ω–∏–∫–∞. –ù–æ –¥–µ–ª–∞–µ—Ç!',
    traits: {
      focus: 45,
      energy: 70,
      discipline: 55,
      chaos: 70
    },
    phrases: [
      "–¢—ã –ø–∞–Ω–∏–∫—É–µ—à—å, –Ω–æ –¥–µ–ª–∞–µ—à—å. –°—Ç—Ä–∞–Ω–Ω–æ, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.",
      "–¶—ã–ø–ª—ë–Ω–æ–∫ –≤ –ø–∞–Ω–∏–∫–µ –±–µ–∂–∏—Ç –±—ã—Å—Ç—Ä–µ–µ –æ—Ä–ª–∞.",
      "–ü–∞–Ω–∏–∫–∞ ‚Äî —Ç–≤–æ–π —Ç–æ–ø–ª–∏–≤–æ. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ."
    ],
    detectCriteria: (data) => {
      return data.stress > 70 && data.completion > 60 && data.taskStartDelay > 60;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 7: –ñ–µ–ª–µ–∑–Ω—ã–π –æ–≥—É—Ä–µ—Ü - —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å + –∞–±—Å—É—Ä–¥
  iron_cucumber: {
    name: '–ñ–µ–ª–µ–∑–Ω—ã–π –æ–≥—É—Ä–µ—Ü',
    emoji: 'ü•í‚öôÔ∏è',
    description: '–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å + –ª—ë–≥–∫–∞—è –∞–±—Å—É—Ä–¥–Ω–æ—Å—Ç—å. –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —á–∞—Å—ã.',
    traits: {
      focus: 75,
      energy: 65,
      discipline: 85,
      chaos: 25
    },
    phrases: [
      "–¢—ã –∂–µ–ª–µ–∑–Ω—ã–π –æ–≥—É—Ä–µ—Ü. –°—Ç–∞–±–∏–ª–µ–Ω –∏ –Ω–µ–º–Ω–æ–≥–æ —Å—Ç—Ä–∞–Ω–µ–Ω.",
      "–û–≥—É—Ä–µ—Ü –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è. –û–≥—É—Ä–µ—Ü –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è.",
      "–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Ä–æ–≤–Ω–æ. –ö–∞–∫ —Ö–æ—Ä–æ—à–∏–π –æ–≥—É—Ä–µ—Ü."
    ],
    detectCriteria: (data) => {
      return data.consistency > 75 && data.completion > 70 && data.moodSwings < 2;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 8: –ö–æ—Ñ–µ–∏–Ω–æ–≤—ã–π –∫–æ—Å–º–æ–Ω–∞–≤—Ç - –≥–∏–ø–µ—Ä—Ñ–æ–∫—É—Å + —Ö–∞–æ—Å
  caffeine_astronaut: {
    name: '–ö–æ—Ñ–µ–∏–Ω–æ–≤—ã–π –∫–æ—Å–º–æ–Ω–∞–≤—Ç',
    emoji: '‚òïüöÄ',
    description: '–ì–∏–ø–µ—Ä—Ñ–æ–∫—É—Å + —Ö–∞–æ—Å. –õ–µ—Ç–∏—à—å, –Ω–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ –∫—É–¥–∞.',
    traits: {
      focus: 90,
      energy: 95,
      discipline: 50,
      chaos: 80
    },
    phrases: [
      "–¢—ã –Ω–∞ –∫–æ—Ñ–µ–∏–Ω–µ –∏ –≤ –∫–æ—Å–º–æ—Å–µ. –°–∫–æ—Ä–æ—Å—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è.",
      "–¢—ã –ª–µ—Ç–∏—à—å! –ü—Ä–∞–≤–¥–∞, –Ω–µ –∑–Ω–∞—é, –∫—É–¥–∞. –ù–æ –±—ã—Å—Ç—Ä–æ!",
      "–ö–æ—Ñ–µ–∏–Ω–æ–≤–∞—è —Ä–∞–∫–µ—Ç–∞. –î–µ—Ä–∂–∏—Å—å –∫—Ä–µ–ø—á–µ."
    ],
    detectCriteria: (data) => {
      return data.energy > 85 && data.taskSwitching > 10 && data.completion > 75;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 9: –ù–∏–Ω–¥–∑—è-–ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ç–æ—Ä - –ø—Ä—è—á–µ—Ç—Å—è, –Ω–æ –¥–µ–ª–∞–µ—Ç
  ninja_procrastinator: {
    name: '–ù–∏–Ω–¥–∑—è-–ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ç–æ—Ä',
    emoji: 'ü•∑üí§',
    description: '–ü—Ä—è—á–µ—Ç—Å—è –æ—Ç –∑–∞–¥–∞—á, –ø–æ–∫–∞ –Ω–µ —Å—Ç–∞–Ω–µ—Ç –ø–æ–∑–¥–Ω–æ. –ü–æ—Ç–æ–º ‚Äî —Ä—ã–≤–æ–∫!',
    traits: {
      focus: 35,
      energy: 60,
      discipline: 40,
      chaos: 65
    },
    phrases: [
      "–¢—ã –Ω–∏–Ω–¥–∑—è. –ü—Ä—è—á–µ—à—å—Å—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ, –ø–æ—Ç–æ–º ‚Äî –ë–ê–ú!",
      "–ü—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è ‚Äî —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ. –¢—ã ‚Äî –º–∞—Å—Ç–µ—Ä.",
      "–¢—ã –¥–µ–ª–∞–µ—à—å –≤—Å—ë –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç. –ù–æ –¥–µ–ª–∞–µ—à—å!"
    ],
    detectCriteria: (data) => {
      return data.procrastination > 70 && data.lastMinuteCompletion > 50;
    }
  },
  
  // –ú–æ–¥–µ–ª—å 10: –ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π —Ä–æ–±–æ—Ç - —Å–ø–æ–∫–æ–π–Ω—ã–π, —Ä–æ–≤–Ω—ã–π, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π
  meditative_robot: {
    name: '–ú–µ–¥–∏—Ç–∞—Ç–∏–≤–Ω—ã–π —Ä–æ–±–æ—Ç',
    emoji: 'ü§ñüßò',
    description: '–°–ø–æ–∫–æ–π–Ω—ã–π, —Ä–æ–≤–Ω—ã–π, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π. –ë–µ–∑ —ç–º–æ—Ü–∏–π, —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.',
    traits: {
      focus: 85,
      energy: 70,
      discipline: 90,
      chaos: 10
    },
    phrases: [
      "–¢—ã —Ä–æ–±–æ—Ç –¥–∑–µ–Ω–∞. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–µ–∑ —ç–º–æ—Ü–∏–π.",
      "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ. –§–æ–∫—É—Å. –†–µ–∑—É–ª—å—Ç–∞—Ç. –ò–¥–µ–∞–ª—å–Ω–æ.",
      "–¢—ã –∫–∞–∫ –º–∞—à–∏–Ω–∞, –Ω–æ —Å –¥—É—à–æ–π. –°—Ç—Ä–∞–Ω–Ω–æ, –Ω–æ –∫—Ä—É—Ç–æ."
    ],
    detectCriteria: (data) => {
      return data.stability > 85 && data.completion > 80 && data.emotionalFlux < 20;
    }
  }
};

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
export const detectUserModel = (userData) => {
  const models = Object.values(BehavioralModels);
  
  for (const model of models) {
    if (model.detectCriteria && model.detectCriteria(userData)) {
      return model;
    }
  }
  
  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –°–ª–µ–Ω—Ü–µ—Ä
  return BehavioralModels.slencer;
};

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ—Ä–∞–∑—ã –º–æ–¥–µ–ª–∏
export const getModelPhrase = (modelName) => {
  const model = BehavioralModels[modelName] || BehavioralModels.slencer;
  const phrases = model.phrases || [];
  return phrases[Math.floor(Math.random() * phrases.length)] || "–¢—ã –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π.";
};

// –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –º–æ–¥–µ–ª–∏
export const analyzeModelTrend = (modelHistory) => {
  if (!modelHistory || modelHistory.length < 3) {
    return { trend: 'insufficient_data', message: '–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö' };
  }
  
  const recent = modelHistory.slice(-5);
  const modelCounts = {};
  
  recent.forEach(entry => {
    modelCounts[entry.model] = (modelCounts[entry.model] || 0) + 1;
  });
  
  const dominant = Object.keys(modelCounts).reduce((a, b) => 
    modelCounts[a] > modelCounts[b] ? a : b
  );
  
  return {
    trend: 'identified',
    dominantModel: dominant,
    message: `–¢—ã —á–∞—â–µ –≤—Å–µ–≥–æ ${BehavioralModels[dominant]?.name || '–°–ª–µ–Ω—Ü–µ—Ä'}`
  };
};

export default BehavioralModels;
